Tutorial
========

To run the examples you must first activate PyPFASST by running::

$ cd PyPFASST
$ . ./activate

This sets the PYTHONPATH and PATH environment variables appropriately.

The Advection/Diffusion (AD) example
------------------------------------

To run the AD example::

$ cd examples/advection
$ mpirun -n 4 python main.py

This solves the 1d AD equation using a V cycle with 3 PFASST levels
(5, 3, and 2 nodes) and 4 processors.  The logarithm of the maximum
absolute error (compared to an exact solution) is echoed after each
SDC sweep.

The AD example accepts various arguments, see::

$ python main.py -h

for more information.


The Kuramoto-Silvashinsky (KS) example
--------------------------------------

To run the 1D KS example::

$ cd examples/kuramoto_silvashinsky
$ python initial.py -d 1 -n 1024 sin10.h5
$ mpirun -n 4 python main.py -d 1 -i sin10.h5 -f u_x -o test.h5 -a

This solves the 1d KS equation using a V cycle with 3 PFASST levels
and 4 processors (running with more processors produces more
interesting output).  The quadrature is done with 5 Gauss-Radau nodes
on the finest level.

To visualize the output, run::

$ python ../../scripts/visualize1d.py -y -3 3 test.h5

The KS example accepts various arguments, see::

$ python main.py -h

for more information.


The Navier-Stokes (NS) example
------------------------------

The run the 3D NS example::

$ cd examples/navier_stokes
$ python initial.py initial.h5
$ mpirun -n 4 pfautorun initial=initial.h5 output=test.h5 verbose=True



Convergence analysis
--------------------

PyPFASST includes utilities to perform a convergence analysis of the
PFASST algorithm for a given problem.  For example, in the
`examples/advection <https://github.com/memmett/PyPFASST/tree/master/examples/advection>`_
directory, the
`convergence <https://github.com/memmett/PyPFASST/blob/master/examples/advection/convergence.py>`_
script can be used to analyse the convergence of the PFASST algorithm
for the viscous Burgers (VB) example.

To run the script (you'll need SymPy for this)::

$ cd examples/advection
$ python convergence.py

The script performs reference, serial, and parallel runs of the VB
problem with both Gauss-Lobatto (GL) and Gauss-Radau (GR) nodes.  Once
the runs are complete, convergence plots can be generated by::

$ python ../../scripts/plot_convergence.py -d GL
$ python ../../scripts/plot_convergence.py -d GR


Other examples
--------------

There are various other examples included in the PyPFASST
distribution.  Please see the :doc:`examples <examples>` page and the
`examples`_ directory of the PyPFASST source.

.. _`examples`: https://github.com/memmett/PyPFASST/tree/master/examples



